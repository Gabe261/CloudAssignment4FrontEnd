<!DOCTYPE html>
<html>

<head>
    <title>Cart</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>

<body class="bg-light">

    <nav class="navbar navbar-dark bg-dark px-3">
        <h2 class="text-white">Shoe Store</h2>
        <a href="/" class="btn btn-outline-light">Continue Shopping</a>
    </nav>

    <div class="container py-4">
            <div class="row">
                <!-- Empty Cart Button -->
                <form method="POST" action="/emptycart" class="mt-3">
                    <button class="btn btn-primary">
                        Empty Cart
                    </button>
                </form>
                <!-- All Cart Items -->
                <% cartItems.forEach(c => { %>
                    <% const product = cartProducts.find(p => p.id === c.productId); %>

                    <div class="col-12 mb-3">
                        <div class="card shadow-sm border-0" style="border-radius: 12px;">
                            <div class="card-body d-flex align-items-center">

                                <!-- Image -->
                                <div class="me-3">
                                    <img src="<%= product.image %>"
                                         alt="<%= product.name %>"
                                         class="img-fluid rounded"
                                         style="width: 90px; height: 90px; object-fit: contain;">
                                </div>

                                <!-- Product Info -->
                                <div class="flex-grow-1">
                                    <h5 class="fw-semibold mb-1 text-dark">
                                        <%= product.name %>
                                    </h5>

                                    <p class="text-muted small mb-1">
                                        <%= product.description %>
                                    </p>

                                    <p class="fw-bold mb-1 text-dark">
                                        $<%= product.price.toFixed(2) %> <span class="text-muted small">each</span>
                                    </p>

                                    <p class="text-muted small mb-0">
                                        SKU: <%= product.sku %>
                                    </p>

                                    <p class="small mt-1 mb-0 text-dark">
                                        Quantity: <span class="fw-bold"><%= c.quantity %></span>
                                    </p>
                                </div>

                                <!-- Subtotal + Remove -->
                                <div class="text-end ms-3">
                                    <div class="text-muted small">Subtotal</div>

                                    <div class="fw-bold fs-5 text-dark">
                                        $<%= (product.price * c.quantity).toFixed(2) %>
                                    </div>

                                    <form method="POST" action="/removefromcart" class="mt-2">
                                        <input type="hidden" name="cartItemId" value="<%= c.id %>">
                                        <button class="btn btn-outline-danger btn-sm">
                                            Remove
                                        </button>
                                    </form>
                                </div>

                            </div>
                        </div>
                    </div>

                <% }) %>

            </div>
        </div>

</body>
<footer>
    <p>Created By Dany Ko (8818957), Gabe Siewert (8832384), Josh Lanesmith (8885373), Nakul Upasani (8827362), Stefan Kobetich (8832196)</p>
</footer>
</html>